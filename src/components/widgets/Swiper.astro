---
// You will need to install swiper.js with `npm install swiper`
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/css/effect-fade';

import Swiper from 'swiper';
import { Navigation, Pagination, EffectFade } from 'swiper/modules';

const uniqueId = 'swiper-' + Math.random().toString(36).substring(7);
---

<div class="relative w-full aspect-[4/3] sm:aspect-video overflow-hidden group">
  <div id={uniqueId} class="swiper h-full">
    <div class="swiper-wrapper">
      <!-- Slide 1: Image -->
      <div class="swiper-slide relative">
        <img
          src="/images/image1.jpg"
          class="w-full h-full object-cover"
          alt="A vibrant green forest with sunlight filtering through the trees, symbolizing environmental health."
        />
      </div>

      <!-- Slide 2: Video -->
      <div class="swiper-slide relative">
        <video class="w-full h-full object-cover" controls muted loop>
          <source src="/images/video1.mp4" type="video/mp4" />
        </video>
      </div>

      <!-- Slide 3: Image -->
      <div class="swiper-slide relative">
        <img
          src="/images/image2.jpg"
          class="w-full h-full object-cover"
          alt="A wind turbine farm at sunset, showcasing renewable energy solutions."
        />
      </div>

      <!-- Slide 4: Video -->
      <div class="swiper-slide relative">
        <video class="w-full h-full object-cover" controls muted loop>
          <source src="/images/video2.mp4" type="video/mp4" />
        </video>
      </div>
    </div>
    <!-- If we need pagination -->
    <div class="swiper-pagination"></div>

    <!-- If we need navigation buttons -->
    <div class="swiper-button-prev w-10 h-10 bg-white/50 rounded-full flex items-center justify-center transition-opacity duration-300 opacity-0 group-hover:opacity-100"></div>
    <div class="swiper-button-next w-10 h-10 bg-white/50 rounded-full flex items-center justify-center transition-opacity duration-300 opacity-0 group-hover:opacity-100"></div>
  </div>
</div>

<script>
  import 'swiper/css';
  import 'swiper/css/navigation';
  import 'swiper/css/pagination';
  import 'swiper/css/effect-fade';

  import Swiper from 'swiper';
  import { Navigation, Pagination, EffectFade } from 'swiper/modules';

  document.addEventListener('astro:load', () => {
    new Swiper(`#${uniqueId}`, {
      modules: [Navigation, Pagination, EffectFade],
      effect: 'fade',
      loop: true,
      fadeEffect: {
        crossFade: true
      },
      // If we need pagination
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },

      // Navigation arrows
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  });
</script>
